<?xml version="1.0" encoding="utf-8"?>
<odoo>

 
    <record id="action_pipeline_sales_user" model="ir.actions.act_window">
        <field name="name">Pipeline</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">kanban,list,calendar,pivot,graph,form,activity</field>
        <field name="domain">[('user_id', '=', uid)]</field>
        <field name="context">{'default_type': 'opportunity'}</field>
        <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">Create an Opportunity</p>
        </field>
    </record>

    <record id="action_leads_sales_user" model="ir.actions.act_window">
        <field name="name">Leads</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">list,kanban,form,pivot,graph,activity</field>
        <field name="domain">[('user_id', '=', uid)]</field>
        <field name="context">{'default_type': 'lead'}</field>
        <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">Create a Lead</p>
        </field>
    </record>

    <record id="action_pipeline_analysis_sales_user" model="ir.actions.act_window">
        <field name="name">Pipeline Analysis</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">graph,pivot,list,form</field>
        <field name="domain">[('user_id', '=', uid)]</field>
        <field name="search_view_id" ref="crm.crm_opportunity_report_view_search"/>
        <field name="context">{'search_default_filter_opportunity': True, 'search_default_current': True}</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                      (0, 0, {'view_mode': 'graph', 'view_id': ref('crm.crm_opportunity_report_view_graph')}),
                      (0, 0, {'view_mode': 'pivot', 'view_id': ref('crm.crm_opportunity_report_view_pivot')}),
                      (0, 0, {'view_mode': 'list', 'view_id': ref('crm.crm_lead_view_tree_opportunity_reporting')})]"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">No data found!</p>
            <p>Use this menu to have an overview of your Pipeline.</p>
        </field>
    </record>

    <record id="action_leads_analysis_sales_user" model="ir.actions.act_window">
        <field name="name">Leads Analysis</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">graph,pivot,list</field>
        <field name="domain">[('user_id', '=', uid)]</field>
        <field name="search_view_id" ref="crm.crm_opportunity_report_view_search"/>
        <field name="context">{
            'search_default_filter_active': 1,
            'search_default_filter_inactive': 1,
            'search_default_filter_create_date': 1,
        }</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                      (0, 0, {'view_mode': 'graph', 'view_id': ref('crm.crm_opportunity_report_view_graph_lead')}),
                      (0, 0, {'view_mode': 'pivot', 'view_id': ref('crm.crm_opportunity_report_view_pivot_lead')}),
                      (0, 0, {'view_mode': 'form', 'view_id': ref('crm.crm_lead_view_form')}),
                      (0, 0, {'view_mode': 'list', 'view_id': ref('crm.crm_lead_view_tree_reporting')})]"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">No data found!</p>
            <p>This analysis shows you how many leads have been created per month.</p>
        </field>
    </record>


    <record id="action_pipeline_sales_manager" model="ir.actions.act_window">
        <field name="name">Pipeline</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">kanban,list,calendar,pivot,graph,form,activity</field>
        <field name="domain">[]</field>
        <field name="context">{'default_type': 'opportunity'}</field>
        <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">Create an Opportunity</p>
        </field>
    </record>

    <record id="action_leads_sales_manager" model="ir.actions.act_window">
        <field name="name">Leads</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">list,kanban,form,pivot,graph,activity</field>
        <field name="domain">[]</field>
        <field name="context">{'default_type': 'lead'}</field>
        <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">Create a Lead</p>
        </field>
    </record>

    <record id="action_pipeline_analysis_sales_manager" model="ir.actions.act_window">
        <field name="name">Pipeline Analysis</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">graph,pivot,list,form</field>
        <field name="domain">[]</field>
        <field name="search_view_id" ref="crm.crm_opportunity_report_view_search"/>
        <field name="context">{'search_default_filter_opportunity': True, 'search_default_current': True}</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                      (0, 0, {'view_mode': 'graph', 'view_id': ref('crm.crm_opportunity_report_view_graph')}),
                      (0, 0, {'view_mode': 'pivot', 'view_id': ref('crm.crm_opportunity_report_view_pivot')}),
                      (0, 0, {'view_mode': 'list', 'view_id': ref('crm.crm_lead_view_tree_opportunity_reporting')})]"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">No data found!</p>
            <p>Use this menu to have an overview of your Pipeline.</p>
        </field>
    </record>

    <record id="action_leads_analysis_sales_manager" model="ir.actions.act_window">
        <field name="name">Leads Analysis</field>
        <field name="res_model">crm.lead</field>
        <field name="view_mode">graph,pivot,list</field>
        <field name="domain">[]</field>
        <field name="search_view_id" ref="crm.crm_opportunity_report_view_search"/>
        <field name="context">{
            'search_default_filter_active': 1,
            'search_default_filter_inactive': 1,
            'search_default_filter_create_date': 1,
        }</field>
        <field name="view_ids"
               eval="[(5, 0, 0),
                      (0, 0, {'view_mode': 'graph', 'view_id': ref('crm.crm_opportunity_report_view_graph_lead')}),
                      (0, 0, {'view_mode': 'pivot', 'view_id': ref('crm.crm_opportunity_report_view_pivot_lead')}),
                      (0, 0, {'view_mode': 'form', 'view_id': ref('crm.crm_lead_view_form')}),
                      (0, 0, {'view_mode': 'list', 'view_id': ref('crm.crm_lead_view_tree_reporting')})]"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">No data found!</p>
            <p>This analysis shows you how many leads have been created per month.</p>
        </field>
    </record>

    <menuitem
        id="crm.crm_opportunity_report_menu"
        name="Pipeline"
        parent="crm.crm_menu_report"
        action="crm.crm_opportunity_report_action"
        sequence="2"
        active="False"/>
    <menuitem
        id="crm.crm_opportunity_report_menu_lead"
        name="Leads"
        parent="crm.crm_menu_report"
        action="crm.crm_opportunity_report_action_lead"
        sequence="3"
        active="False"/>

    <menuitem id="menu_pipeline_analysis_sales_manager"
              name="Pipeline"
              action="action_pipeline_analysis_sales_manager"
              parent="crm.crm_menu_report"
              groups="activity_dashboard_mngmnt.group_sales_manager_custom"
              sequence="0"/>

    <menuitem id="menu_leads_analysis_sales_manager"
              name="Leads"
              action="action_leads_analysis_sales_manager"
              parent="crm.crm_menu_report"
              groups="activity_dashboard_mngmnt.group_sales_manager_custom"
              sequence="2"/>
              
    <menuitem id="menu_pipeline_analysis_sales_user"
              name="Pipeline"
              action="action_pipeline_analysis_sales_user"
              parent="crm.crm_menu_report"
              groups="activity_dashboard_mngmnt.group_sales_user_custom"
              sequence="10"/>

    <menuitem id="menu_leads_analysis_sales_user"
              name="Leads"
              action="action_leads_analysis_sales_user"
              parent="crm.crm_menu_report"
              groups="activity_dashboard_mngmnt.group_sales_user_custom"
              sequence="11"/>

    <record id="menu_pipeline_analysis_sales_user" model="ir.ui.menu">
        <field name="groups_id" eval="[(6, 0, [ref('group_sales_user_custom')])]"/>
    </record>
    
    <delete model="ir.ui.menu" search="[('id', '=', ref('menu_pipeline_analysis_sales_user')), ('parent_id.groups_id', 'in', [ref('group_sales_manager_custom')])]"/>

    <record id="menu_leads_analysis_sales_user" model="ir.ui.menu">
        <field name="groups_id" eval="[(6, 0, [ref('group_sales_user_custom')])]"/>
    </record>


    <record id="crm_lead_search_inherit_custom" model="ir.ui.view">
        <field name="name">crm.lead.search.custom</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
        <field name="arch" type="xml">
<!--            <xpath expr="//filter[@name='assigned_to_me']" position="replace"/>-->
            <xpath expr="//filter[@name='unassigned']" position="replace"/>
        </field>
    </record>

    <record id="crm_lead_search_analysis_inherit_custom" model="ir.ui.view">
        <field name="name">crm.lead.search.custom.analysis</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_opportunity_report_view_search"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='my']" position="replace"/>
        </field>
    </record>

</odoo>